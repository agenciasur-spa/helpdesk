---
import Layout from "../../../layouts/Layout.astro";
import Navbar from "../../../components/layout/Navbar.astro";
import Footer from "../../../components/layout/Footer.astro";
import data from "../../../content/helpdesk-data.json";

export async function getStaticPaths() {
  const { categories, articles } = data;
  return articles.map((article) => {
    const category = categories.find((c) => c.slug === article.categorySlug);
    return {
      params: { slug: article.slug },
      props: { article, category },
    };
  });
}

const { article, category } = Astro.props;
---

<Layout>
  <Navbar />
  <main class="container py-5">
    <nav aria-label="breadcrumb" class="mb-3">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/helpdesk/">Helpdesk</a></li>
        <li class="breadcrumb-item">
          <a href={`/helpdesk/category/${category.slug}/`}>
            {category.title}
          </a>
        </li>
        <li class="breadcrumb-item">
          <a href={`/helpdesk/articles/${article.slug}/`}>
            {article.title}
          </a>
        </li>
        <li class="breadcrumb-item active">Completo</li>
      </ol>
    </nav>

    <h1>{article.title} — Versión completa</h1>

    <div class="mt-4 article-content">
      {article.content}
    </div>

    <div class="mt-4">
      <a
        href={`/helpdesk/articles/${article.slug}/`}
        class="btn btn-outline-secondary"
      >
        ← Volver al resumen
      </a>
    </div>
  </main>
  <Footer />
</Layout>
